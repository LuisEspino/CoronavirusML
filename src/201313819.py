# ###############################################################################################
#                       CÃ©sar Javier Solares Orozco ----------- 201313819
# ###############################################################################################
import matplotlib.pyplot as plotter
import numpy as np
from sklearn.preprocessing import PolynomialFeatures
from sklearn.pipeline import make_pipeline
from sklearn.linear_model import LinearRegression

# ###############################################################################################
#                                           Covid 19 Honduras
#                   Data founded at : https://covid19tracking.narrativa.com/es/panama/api.html
#                       Dataset was taken from 14-02-2020 to 11-11-2020
# ###############################################################################################


# ###############################################################################################
#                                       Setting the data
# ###############################################################################################
cases = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 3, 7, 7, 10, 14, 15, 15, 22, 22, 22, 22, 23, 23, 24, 25, 25, 26, 31, 35, 41, 46, 46, 46, 46, 46, 47, 47, 55, 59, 61, 64, 66, 71, 75, 75, 76, 82, 83, 93, 99, 105, 107, 108, 108, 116, 121, 123, 133, 134, 138, 142, 146, 147, 151, 156, 167, 174, 180, 182, 188, 194, 196, 199, 201, 212, 217, 225, 234, 243, 248, 250, 258, 262, 271, 290, 294, 306, 310, 312, 322, 330, 336, 343, 349, 358, 363, 395, 405, 417, 426, 471, 479, 479, 485, 497, 542, 591, 605, 629, 639, 656, 677, 694, 704, 750, 771, 774, 789,
         807, 825, 835, 857, 891, 900, 935, 988, 1006, 1011, 1061, 1098, 1116, 1166, 1214, 1259, 1312, 1337, 1368, 1377, 1384, 1400, 1423, 1446, 1465, 1476, 1495, 1506, 1515, 1533, 1542, 1548, 1567, 1575, 1583, 1593, 1608, 1619, 1632, 1643, 1654, 1683, 1703, 1747, 1803, 1827, 1842, 1858, 1873, 1888, 1924, 1954, 1984, 2006, 2007, 2023, 2034, 2044, 2049, 2058, 2065, 2079, 2087, 2087, 2102, 2122, 2146, 2166, 2184, 2204, 2206, 2222, 2249, 2271, 2288, 2289, 2301, 2323, 2380, 2386, 2399, 2422, 2433, 2447, 2466, 2477, 2492, 2504, 2512, 2521, 2528, 2533, 2552, 2556, 2563, 2568, 2576, 2582, 2596, 2604, 2604, 2617, 2623, 2633, 2639, 2652, 2661, 2669, 2669, 2675, 2688, 2706, 2730, 2736, 2741, 2745, 2745, 2765, 2765]

count_cases = []
val = 0
for i in cases:
    val = val+i
    count_cases.append(val)

print(len(count_cases))

days = []
for i in range(len(count_cases)):
    days.append(i + 1)

count_cases = np.asarray(count_cases)
days = np.asarray(days)

count_cases = count_cases[:, np.newaxis]
days = days[:, np.newaxis]

# ###############################################################################################
#                                   Prediction of day 350
# ###############################################################################################


sequence = np.linspace(days.min(), 350, 400).reshape(-1, 1)
# ###############################################################################################
#                                       Create the model
#                                           Grade 7
# ###############################################################################################
model = make_pipeline(PolynomialFeatures(7), LinearRegression())
model.fit(days, count_cases)
plotter.figure()
plotter.scatter(days, count_cases)

# ###############################################################################################
#                                     Plotting the model
# ###############################################################################################
plotter.plot(sequence, model.predict(sequence), color="yellow")
plotter.title("Prediction of # of deaths for day 350 in Honduras - Covid-19")
plotter.show()
